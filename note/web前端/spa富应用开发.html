<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端的发展 | Wix</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/images/logo.ico">
    <meta name="description" content="Wix 学习笔记">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.6d920bc0.css" as="style"><link rel="preload" href="/assets/js/app.198c4f59.js" as="script"><link rel="preload" href="/assets/js/2.e95879ab.js" as="script"><link rel="preload" href="/assets/js/50.3ce8f918.js" as="script"><link rel="prefetch" href="/assets/js/10.db373d4d.js"><link rel="prefetch" href="/assets/js/11.9848e06b.js"><link rel="prefetch" href="/assets/js/12.78f09c18.js"><link rel="prefetch" href="/assets/js/13.45724081.js"><link rel="prefetch" href="/assets/js/14.b1af1cdf.js"><link rel="prefetch" href="/assets/js/15.d73d27f3.js"><link rel="prefetch" href="/assets/js/16.5ba5cf95.js"><link rel="prefetch" href="/assets/js/17.9f3839c7.js"><link rel="prefetch" href="/assets/js/18.5c1a5c62.js"><link rel="prefetch" href="/assets/js/19.f7c86a93.js"><link rel="prefetch" href="/assets/js/20.e836272f.js"><link rel="prefetch" href="/assets/js/21.a28abbc9.js"><link rel="prefetch" href="/assets/js/22.8b42eb4f.js"><link rel="prefetch" href="/assets/js/23.f8391775.js"><link rel="prefetch" href="/assets/js/24.3ee44ff2.js"><link rel="prefetch" href="/assets/js/25.3e22d31d.js"><link rel="prefetch" href="/assets/js/26.1eb2b711.js"><link rel="prefetch" href="/assets/js/27.e5a3292a.js"><link rel="prefetch" href="/assets/js/28.02652c87.js"><link rel="prefetch" href="/assets/js/29.6a286def.js"><link rel="prefetch" href="/assets/js/3.eb18f625.js"><link rel="prefetch" href="/assets/js/30.dc64b880.js"><link rel="prefetch" href="/assets/js/31.2753e1e8.js"><link rel="prefetch" href="/assets/js/32.599fade7.js"><link rel="prefetch" href="/assets/js/33.7bb62881.js"><link rel="prefetch" href="/assets/js/34.aa05d905.js"><link rel="prefetch" href="/assets/js/35.b70a491a.js"><link rel="prefetch" href="/assets/js/36.fd641568.js"><link rel="prefetch" href="/assets/js/37.d0ab458a.js"><link rel="prefetch" href="/assets/js/38.6e59c0dd.js"><link rel="prefetch" href="/assets/js/39.e8caa579.js"><link rel="prefetch" href="/assets/js/4.930d8e1a.js"><link rel="prefetch" href="/assets/js/40.8b05a939.js"><link rel="prefetch" href="/assets/js/41.60b2d5c0.js"><link rel="prefetch" href="/assets/js/42.d9cfebdb.js"><link rel="prefetch" href="/assets/js/43.d4466f03.js"><link rel="prefetch" href="/assets/js/44.5c1a2794.js"><link rel="prefetch" href="/assets/js/45.bb0c33f0.js"><link rel="prefetch" href="/assets/js/46.181aed3f.js"><link rel="prefetch" href="/assets/js/47.b2d7a402.js"><link rel="prefetch" href="/assets/js/48.646acd7a.js"><link rel="prefetch" href="/assets/js/49.71d2a9b0.js"><link rel="prefetch" href="/assets/js/5.92598ee3.js"><link rel="prefetch" href="/assets/js/51.27c31284.js"><link rel="prefetch" href="/assets/js/52.dc8c6f2d.js"><link rel="prefetch" href="/assets/js/53.71eff88c.js"><link rel="prefetch" href="/assets/js/54.863da2ef.js"><link rel="prefetch" href="/assets/js/55.dada7e19.js"><link rel="prefetch" href="/assets/js/56.8ecde246.js"><link rel="prefetch" href="/assets/js/57.942a96dc.js"><link rel="prefetch" href="/assets/js/58.dec84d81.js"><link rel="prefetch" href="/assets/js/59.7bc537e5.js"><link rel="prefetch" href="/assets/js/6.1568a444.js"><link rel="prefetch" href="/assets/js/60.8916f161.js"><link rel="prefetch" href="/assets/js/7.7727937c.js"><link rel="prefetch" href="/assets/js/8.4275ec69.js"><link rel="prefetch" href="/assets/js/9.c3b4372b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6d920bc0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo.ico" alt="Wix" class="logo"> <span class="site-name can-hide">Wix</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://xiawx.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://todo.xiawx.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Todo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  学习笔记
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://xiawx.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://todo.xiawx.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Todo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  学习笔记
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/note/A.最新/" class="sidebar-heading clickable"><span>A.最新</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/A.最新/HTML标签介绍.html" class="sidebar-link">HTML标签介绍</a></li><li><a href="/note/A.最新/Nodejs.html" class="sidebar-link">Nodejs</a></li><li><a href="/note/A.最新/React.html" class="sidebar-link">React</a></li><li><a href="/note/A.最新/css.html" class="sidebar-link">css</a></li><li><a href="/note/A.最新/js语法及api使用技巧.html" class="sidebar-link">js语法及api使用技巧</a></li><li><a href="/note/A.最新/常用命令.html" class="sidebar-link">常用命令</a></li><li><a href="/note/A.最新/常用封装.html" class="sidebar-link">常用封装</a></li><li><a href="/note/A.最新/常见加密算法.html" class="sidebar-link">常见加密算法</a></li><li><a href="/note/A.最新/常见编码.html" class="sidebar-link">常见编码</a></li><li><a href="/note/A.最新/框架原理封装.html" class="sidebar-link">框架原理封装</a></li><li><a href="/note/A.最新/鉴权.html" class="sidebar-link">鉴权</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/note/B.css/" class="sidebar-heading clickable"><span>B.css</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/B.css/css布局.html" class="sidebar-link">css布局</a></li><li><a href="/note/B.css/弹性布局.html" class="sidebar-link">弹性布局</a></li><li><a href="/note/B.css/网格布局.html" class="sidebar-link">网格布局</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/note/C.基础笔记/" class="sidebar-heading clickable"><span>C.基础笔记</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/C.基础笔记/angular复习总结.html" class="sidebar-link">angular复习总结</a></li><li><a href="/note/C.基础笔记/golang笔记.html" class="sidebar-link">golang笔记</a></li><li><a href="/note/C.基础笔记/nodejs笔记总结.html" class="sidebar-link">nodejs笔记总结</a></li><li><a href="/note/C.基础笔记/react复习总结.html" class="sidebar-link">react复习总结</a></li><li><a href="/note/C.基础笔记/vue复习总结.html" class="sidebar-link">vue复习总结</a></li><li><a href="/note/C.基础笔记/webpack复习总结.html" class="sidebar-link">webpack复习总结</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/note/D.开发踩坑/" class="sidebar-heading clickable"><span>D.开发踩坑</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/D.开发踩坑/windows如何安装mysql.html" class="sidebar-link">windows如何安装mysql</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/note/js/" class="sidebar-heading clickable"><span>js</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/js/ES6.html" class="sidebar-link">ES6</a></li><li><a href="/note/js/babel.html" class="sidebar-link">babel</a></li><li><a href="/note/js/js函数高阶应用.html" class="sidebar-link">js函数高阶应用</a></li><li><a href="/note/js/js常用api总结.html" class="sidebar-link">js常用api总结</a></li><li><a href="/note/js/js异步编程.html" class="sidebar-link">js异步编程</a></li><li><a href="/note/js/js模块化.html" class="sidebar-link">js模块化</a></li><li><a href="/note/js/js错误处理.html" class="sidebar-link">js错误处理</a></li><li><a href="/note/js/ts笔记.html" class="sidebar-link">ts笔记</a></li><li><a href="/note/js/对于js事件的解析.html" class="sidebar-link">对于js事件的解析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/note/web前端/" class="sidebar-heading clickable open"><span>web前端</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/web前端/http.html" class="sidebar-link">http</a></li><li><a href="/note/web前端/reactNative.html" class="sidebar-link">reactNative</a></li><li><a href="/note/web前端/react特性.html" class="sidebar-link">react特性</a></li><li><a href="/note/web前端/redux.html" class="sidebar-link">redux</a></li><li><a href="/note/web前端/spa富应用开发.html" class="active sidebar-link">spa富应用开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/web前端/spa富应用开发.html#前端的发展" class="sidebar-link">前端的发展</a></li><li class="sidebar-sub-header"><a href="/note/web前端/spa富应用开发.html#前端集成的方案" class="sidebar-link">前端集成的方案</a></li><li class="sidebar-sub-header"><a href="/note/web前端/spa富应用开发.html#常用工具" class="sidebar-link">常用工具</a></li><li class="sidebar-sub-header"><a href="/note/web前端/spa富应用开发.html#自动化构建" class="sidebar-link">自动化构建</a></li></ul></li><li><a href="/note/web前端/vue常见插件.html" class="sidebar-link">vue常见插件</a></li><li><a href="/note/web前端/web前端常见问题.html" class="sidebar-link">web前端常见问题</a></li><li><a href="/note/web前端/前端常见特效原理.html" class="sidebar-link">前端常见特效原理</a></li><li><a href="/note/web前端/前端算法总结.html" class="sidebar-link">前端算法总结</a></li><li><a href="/note/web前端/前端面试复习.html" class="sidebar-link">前端面试复习</a></li><li><a href="/note/web前端/基于redux的状态管理.html" class="sidebar-link">基于redux的状态管理</a></li><li><a href="/note/web前端/工程配置.html" class="sidebar-link">工程配置</a></li><li><a href="/note/web前端/常见组件设计.html" class="sidebar-link">常见组件设计</a></li><li><a href="/note/web前端/开源项目流程.html" class="sidebar-link">开源项目流程</a></li></ul></section></li><li><a href="/note/%E7%A4%BE%E5%8C%BA%E6%96%87%E7%AB%A0/" class="sidebar-link">社区文章</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前端的发展"><a href="#前端的发展" class="header-anchor">#</a> 前端的发展</h2> <ul><li>1993年，出现表单，使得网页中可以有数据的流动</li> <li>1995年，js出现，可以为网页添加一些动态效果</li> <li>1996年，flash的出现，使得网页动画等动态效果称为可能</li> <li>1998年，css产生，将网页的样式抽离出来</li> <li>1999年，微软在ie5中实现了xmlhttprequest这个API</li> <li>2005年，Google发布Gmail，采用了ajax技术，标志了前后端分离的产生</li> <li>2007年，为了在手机端实现良好的网页效果，出现了网格布局等</li> <li>2011年，h5发布，前端领域逐渐兴起</li></ul> <h2 id="前端集成的方案"><a href="#前端集成的方案" class="header-anchor">#</a> 前端集成的方案</h2> <p>前端行业经历了这么长时间的发展，技术元素非常丰富，这里列举出一般web团队需要用到的技术元素：</p> <ol><li><code>开发规范</code>：包括开发、部署的目录规范，编码规范等。不要小瞧规范的威力，可以极大的提升开发效率，真正优秀的规范不会让使用者感到约束，而是能帮助他们快速定位问题，提升效率。</li> <li><code>模块化开发</code>：针对js、css，以功能或业务为单元组织代码。js方面解决独立作用域、依赖管理、api暴露、按需加载与执行、安全合并等问题，css方面解决依赖管理、组件内部样式管理等问题。是提升前端开发效率的重要基础。现在流行的模块化框架有requirejs、seajs等。</li> <li><code>组件化开发</code>：在模块化基础上，以页面小部件(component)为单位将页面小部件的js、css、html代码片段放在一起进行开发、维护，组件单元是资源独立的，组件在系统内可复用。比如头部(header)、尾部(footer)、搜索框(searchbar)、导航(menu)、对话框(dialog)等，甚至一些复杂的组件比如编辑器(editor)等。通常业务会针对组件化的js部分进行必要的封装，解决一些常见的组件渲染、交互问题。</li> <li><code>组件仓库</code>：有了组件化，我们希望将一些非常通用的组件放到一个公共的地方供团队共享，方便新项目复用，这个时候我们就需要引入一个组件仓库的东西，现在流行的组件库有bower、component等。团队发展到一定规模后，组件库的需求会变得非常强烈。</li> <li><code>性能优化</code>：这里的性能优化是指能够通过工程手段保证的性能优化点。由于其内容比较丰富，就不在这里展开了，感兴趣的同学可以阅读我的这两篇文章 [<a href="http://infoq.com/cn/articles/front-end-engineering-and-performance-optimization-part1" target="_blank" rel="noopener noreferrer">1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>] [<a href="http://infoq.com/cn/articles/front-end-engineering-and-performance-optimization-part2" target="_blank" rel="noopener noreferrer">2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>]。性能优化是前端项目发展到一定阶段必须经历的过程。这部分我想强调的一点是 <code>性能优化一定是一个工程问题和统计问题</code>，不能用工程手段保证的性能优化是不靠谱的，优化时只考虑一个页面的首次加载，不考虑全局在宏观统计上的优化提升也是片面的。</li> <li><code>项目部署</code>：部署按照现行业界的分工标准，虽然不是前端的工作范畴，但它对性能优化有直接的影响，包括静态资源缓存、cdn、非覆盖式发布等问题。合理的静态资源资源部署可以为前端性能带来较大的优化空间。</li> <li><code>开发流程</code>：完整的开发流程包括本地开发调试、视觉效果走查确认、前后端联调、提测、上线等环节。对开发流程的改善可以大幅降低开发的时间成本，工作这些年见过很多独立的系统（cms系统、静态资源推送系统）将开发流程割裂开，对前端开发的效率有严重的阻碍。</li> <li><code>开发工具</code>：这里说的工具不是指IDE，而是工程工具，包括构建与优化工具、开发-调试-部署等流程工具，以及组件库获取、提交等相关工具，甚至运营、文档、配置发布等平台工具。前端开发需要工具支持，这个问题的根本原因来自前端领域语言特性（未来我会单独写一篇文章介绍前端领域语言缺陷问题）。前端开发所使用的语言（js、css、html）以及前端工程资源的加载与定位策略决定了前端工程必须要工具支持。由于这些工具通常都是独立的系统，要想把它们串联起来，才有了yeoman这样的封装。前面提到的7项技术元素都直接或间接的对前端开发工具设计产生一定的影响，因此能否串联其他技术要素，使得前端开发形成一个连贯可持续优化的开发体系，工具的设计至关重要。</li></ol> <p>以上8项，1-3是技术和业务相关的开发需求，4是技术沉淀与共享需求，5-8是工程优化需求。</p> <h2 id="常用工具"><a href="#常用工具" class="header-anchor">#</a> 常用工具</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i <span class="token parameter variable">-g</span> htmlhint <span class="token comment">##静态代码检查工具</span>
<span class="token function">npm</span> i <span class="token parameter variable">-g</span> csslint <span class="token comment">##静态代码检查工具</span>
<span class="token function">npm</span> i <span class="token parameter variable">-g</span> eslint <span class="token comment">##静态代码检查工具</span>
<span class="token function">npm</span> - <span class="token parameter variable">-g</span> browser-sync <span class="token comment">##热加载工具</span>
</code></pre></div><h2 id="自动化构建"><a href="#自动化构建" class="header-anchor">#</a> 自动化构建</h2> <h4 id="github版本控制"><a href="#github版本控制" class="header-anchor">#</a> github版本控制</h4> <ul><li><p>创建github仓库,本地创建md笔记以及<code>SUMMARY.md</code>文件作为目录</p></li> <li><p>初始化npm环境，下载gitbook<code>npm i gitbook-cli -D</code></p></li> <li><p>上传内容到主分支</p></li> <li><p>打包<code>gitbook build</code>,打包后出现_book目录，进入目录，将此目录与本库的gh-pages关联，并上传。</p></li> <li><p>通过访问<code>https://githubname.github.io/repositories</code></p></li></ul> <h4 id="持续集成"><a href="#持续集成" class="header-anchor">#</a> 持续集成</h4> <ul><li><p>在tarvis CI关联github，并选择要测试的项目，也可以设置环境变量</p></li> <li><p>在主分支，创建.travis.yml，写入配置</p></li> <li><p>上传到远程仓库，github会自动执行配置文件中的过程</p></li></ul> <h4 id="总结"><a href="#总结" class="header-anchor">#</a> 总结：</h4> <p>master分支中，有文章的md格式文档、summary目录、travis配置文件、依赖配置文件package（包含gitbook-cli模块）</p> <p>gh-pages分支中，即为<code>gitbook build</code>打包后，<code>_book</code>目录下的全部内容</p> <p>travis配置文件:</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>language: node_js
node_js:
  <span class="token list punctuation">-</span> &quot;node&quot;

after_script:
  <span class="token list punctuation">-</span> gitbook build
  <span class="token list punctuation">-</span> cd ./_book
  <span class="token list punctuation">-</span> git init
  <span class="token list punctuation">-</span> git config user.name &quot;${USER_NAME}&quot;
  <span class="token list punctuation">-</span> git config user.email &quot;${USER_EMAIL}&quot;
  <span class="token list punctuation">-</span> git add .
  <span class="token list punctuation">-</span> git commit -m &quot;publish gitbook&quot;
  <span class="token list punctuation">-</span> git push --force --quiet &quot;https://${ACC_TOKEN}@${GH_REF}&quot; master:${BRANCH}

branches:
  only:
    <span class="token list punctuation">-</span> master
    
    
<span class="token title important"><span class="token punctuation">##</span>ACC_TOKEN:token指令</span>
<span class="token title important"><span class="token punctuation">##</span>GH_REF:仓库地址</span>
<span class="token title important"><span class="token punctuation">##</span>BRANCH:分支名</span>
<span class="token title important"><span class="token punctuation">##</span></span>
</code></pre></div><h4 id="编译预处理"><a href="#编译预处理" class="header-anchor">#</a> 编译预处理</h4> <p>通常我们会使用一些高级语言进行开发，而浏览器只支持html、css、js基本代码，所以我们要在开发结束后，将高级代码预处理为基本代码。例如css的超集有less、sass、scss，js的超集有typescript、coffee script。</p> <p>与上面相同，我们借助grunt的插件来将代码进行预处理。</p> <p>以less为例</p> <p>首先需要下载用到的插件</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i <span class="token parameter variable">-g</span> grunt-cli   
<span class="token function">npm</span> i <span class="token parameter variable">-D</span> grunt grunt-contrib-less
</code></pre></div><p>编写<code>Gruntflie.js</code>文件，以下是基本框架</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTasks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在本实例中（处理less）写为</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span>
		<span class="token literal-property property">less</span><span class="token operator">:</span><span class="token punctuation">{</span>
        	<span class="token literal-property property">compile</span><span class="token operator">:</span><span class="token punctuation">{</span>
        		<span class="token literal-property property">files</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">'dist/compo;ed.css'</span><span class="token operator">:</span><span class="token string">&quot;css/*.less&quot;</span><span class="token punctuation">}</span>
        	<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">&quot;grunt-contrib-less&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'less:compile'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在终端<code>grunt default</code>完成构建</p> <h4 id="静态代码检查"><a href="#静态代码检查" class="header-anchor">#</a> 静态代码检查</h4> <p>属于静态的白盒测试。</p> <p>检查要素：规则、开发工具检验、命令行工具、Grunt插件、配置文件。</p> <h6 id="html静态代码检查"><a href="#html静态代码检查" class="header-anchor">#</a> html静态代码检查</h6> <p>创建<code>.htmlhintrc</code>配置文件,填写要检测的规则</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tagname-lowercase&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;attr-lowercase&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;attr-value-double-quotes&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;attr-value-not-empty&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;attr-no-duplication&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;doctype-first&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tag-pair&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;empty-tag-not-self-closed&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;spec-char-escape&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id-unique&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;src-not-empty&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;title-require&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;alt-require&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;doctype-html5&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id-class-value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dash&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;style-disabled&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;inline-style-disabled&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;inline-script-disabled&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;space-tab-mixed-disabled&quot;</span><span class="token operator">:</span> <span class="token string">&quot;space&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id-class-ad-disabled&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;href-abs-or-rel&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;attr-unsafe-chars&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;head-script-disabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>安装<code>grunt-htmlhint</code>模块，编辑<code>gruntfile.js</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span>
		<span class="token literal-property property">htmlint</span><span class="token operator">:</span><span class="token punctuation">{</span>
        	<span class="token literal-property property">option</span><span class="token operator">:</span><span class="token punctuation">{</span>	
        		<span class="token literal-property property">htmlintrc</span><span class="token operator">:</span><span class="token string">'./.htmlhintrc'</span>
        	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">src</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'*.html'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">&quot;grunt-htmlhint&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'htmlint'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在命令行通过执行<code>grunt</code>命令行下进行代码检测。</p> <h6 id="css静态代码检查"><a href="#css静态代码检查" class="header-anchor">#</a> css静态代码检查</h6> <p>填写<code>.csslintrc</code>配置文件。</p> <p>安装<code>grunt-contrib-csslint</code>插件，编辑<code>gruntfile.js</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span>
		<span class="token literal-property property">cssint</span><span class="token operator">:</span><span class="token punctuation">{</span>
        	<span class="token literal-property property">option</span><span class="token operator">:</span><span class="token punctuation">{</span>	
        		<span class="token literal-property property">csslintrc</span><span class="token operator">:</span><span class="token string">'./.csslintrc'</span>
        	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">src</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'*.css'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">&quot;grunt-contrib-csslint&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'csslint'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在命令行通过执行<code>grunt</code>命令行下进行代码检测。</p> <h6 id="js静态代码检查"><a href="#js静态代码检查" class="header-anchor">#</a> js静态代码检查</h6> <p>JS下与上面两种同理，用打的是<code>grunt-eslint</code>插件,在命令行使用<code>eslint --init</code>初始化文件<code>.eslintrc.json</code>.</p> <p>修改配置文件<code>gruntfile.js</code>。</p> <div class="language-json extra-class"><pre class="language-json"><code>module.exports=function(grunt)<span class="token punctuation">{</span>
	grunt.initConfig(
		esint<span class="token operator">:</span><span class="token punctuation">{</span>
        	option<span class="token operator">:</span><span class="token punctuation">{</span>	
        		csslintrc<span class="token operator">:</span>'./.eslintrc.json'
        	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    		src<span class="token operator">:</span><span class="token punctuation">[</span>'*.js'<span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
	);
    grunt.loadNpmTasks(<span class="token string">&quot;grunt-eslint&quot;</span>);
    grunt.registerTask('default'<span class="token punctuation">,</span><span class="token punctuation">[</span>'eslint'<span class="token punctuation">]</span>);
<span class="token punctuation">}</span>
</code></pre></div><p>在命令行通过执行<code>grunt</code>命令行下进行代码检测。</p> <h4 id="单元测试"><a href="#单元测试" class="header-anchor">#</a> 单元测试</h4> <p>属于动态的白盒测试。</p> <p>程序中的错误种类，语法错误、逻辑错误、运行时错误。</p> <p>软件测试主要针对于逻辑错误。</p> <p>测试框架有很多，本文讲的测试主要基于mocha框架。</p> <h6 id="后端单元测试"><a href="#后端单元测试" class="header-anchor">#</a> 后端单元测试</h6> <p>以一个<code>add.js</code>为例，其代码如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/*add.js*/</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span>length<span class="token operator">!=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sum x y'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> x<span class="token operator">=</span><span class="token function">Number</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    y<span class="token operator">=</span><span class="token function">Number</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> add<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./calc.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>


<span class="token comment">/*calc.js*/</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> x<span class="token punctuation">)</span><span class="token operator">===</span><span class="token string">'number'</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> y<span class="token punctuation">)</span><span class="token operator">===</span><span class="token string">'number'</span><span class="token punctuation">)</span>
       <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
       <span class="token keyword">return</span> <span class="token number">NaN</span>
<span class="token punctuation">}</span>

</code></pre></div><p>在程序中测试的目标是某一个函数，所以我们真正测试的是<code>calc.js</code></p> <p>安装环境<code>mocha</code>（测试环境）<code>chai</code>（断言库）</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> mocha chai
</code></pre></div><p>创建<code>test</code>目录，用于存放测试代码，进入目录创建<code>calc.test.js</code>并编写</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> add <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../calc.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      expect<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;chai&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>expect<span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;加法描述&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//测试用例,一个it就是一个测试用例</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;0+0=0&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;1+0=1&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在命令行下输入一下命令进行测试</p> <div class="language-shell extra-class"><pre class="language-shell"><code>node_modules/.bin/mocha
</code></pre></div><p>这样就完成了一个测试代码的编写，但是用例写的是否好是测试代码的关键，为了病假单元测试设计的好坏，引入了覆盖率的概念。</p> <p>覆盖率分为四种：行覆盖率、函数覆盖率、分支覆盖率、语句覆盖率</p> <p>为了查看测试覆盖率，引入以下依赖</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-D</span> istanbul
</code></pre></div><p>在命令行进行如下命令,通过<code>istanbul</code>进行<code>mocha</code>测试，在结果中可显示覆盖率</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./node_modlues/.bin/istanbul cover ./node_modules/.bin/_mocha
</code></pre></div><p>当然这是的手动去测试，我们也可以借助grunt的插件去自动化测试。</p> <h6 id="前端单元测试"><a href="#前端单元测试" class="header-anchor">#</a> 前端单元测试</h6> <p>对于前端，我们测试的也是js文件中的逻辑部分即方法、函数，以下面的js文件为例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/*reactange.js*/</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> $width<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#width&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        $height<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#height&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        $btnCal<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#calculate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        $perimeter<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#perimeter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        $area<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#area&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    $btnCal<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> w<span class="token operator">=</span><span class="token function">Number</span><span class="token punctuation">(</span>$width<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            h<span class="token operator">=</span><span class="token function">Number</span><span class="token punctuation">(</span>$height<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">var</span> react<span class="token operator">=</span><span class="token function">reactangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $perimeter<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>react<span class="token punctuation">.</span><span class="token function">perimeter</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $area<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>react<span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/*util.js*/</span>
<span class="token keyword">function</span> <span class="token function">reactabgle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'perimeter'</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">w<span class="token punctuation">,</span>h</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">2</span><span class="token operator">*</span><span class="token punctuation">(</span>w<span class="token operator">+</span>h<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">'area'</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">w<span class="token punctuation">,</span>h</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> w<span class="token operator">*</span>h
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在前端<code>index.html</code>中引入<code>util.js</code></p> <p>接下里要生成前端测试环境，安装<code>mocha chai</code></p> <p>使用<code>./node_module/.bin/macha init test</code>生成前端测试环境，生成test目录</p> <p>创建<code>util.test.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> expect <span class="token operator">=</span>chai<span class="token punctuation">.</span>expect<span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;矩形面积测试&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;area(10,5)=50&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> r<span class="token operator">=</span><span class="token function">reactangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>将<code>util.js</code> 和<code>node_module/chai/chai.js</code>引入<code>test</code>目录下的<code>index.html</code></p> <p>此时打开页面可查看结果,接下来继续完成自动化测试</p> <p>下载依赖<code>grunt grunt-mocha</code>(前端插件时<code>grunt-mocha</code>后端是<code>grunt-mocha-cli</code>)其中<code>grunt-mocha</code>要安装<code>^0.4.12</code>版本</p> <p>配置<code>Gruntfile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">mocha</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">src</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'test/index.html'</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">option</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">run</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">reportor</span><span class="token operator">:</span><span class="token string">'Dot'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-mocha'</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'mocha'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在命令行下运行<code>grunt</code>查看结果</p> <h6 id="http接口测试"><a href="#http接口测试" class="header-anchor">#</a> http接口测试</h6> <p>假设我们有一个接口</p> <p>接口：<code>http://localhost:8080/reatangle?width=20&amp;height=20</code></p> <p>返回结果：<code>{'code':200,'reason':'查寻成功'，result:{'area':400,'perimeter':80}}</code></p> <p>创建test目录，进入创建<code>app.test.js</code>文件编写测试代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      expect<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;chai&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>expect<span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;接口测试&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//done是引入mocha的异步机制</span>
    <span class="token comment">//测试用例,一个it就是一个测试用例</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;正确请求格式测试&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8080/reatangle?width=20&amp;height=20'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> result<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>result<span class="token operator">+=</span>chunk<span class="token punctuation">}</span><span class="token punctuation">)</span>
            res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> rect<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">expect</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>area<span class="token punctuation">)</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">expect</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>perimeter<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;1+0=1&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>安装<code>mocha chai</code>,通过<code>./node_module/.bin/mocha</code>进行测试</p> <p>接下来进行自动化改造</p> <p>安装<code>grunt grunt-mocha-cli grunt-run</code></p> <p>编写<code>Gruntfile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">run</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">api</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">option</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">wait</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token literal-property property">args</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'./app.js'</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">mochacli</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">option</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">reporter</span><span class="token operator">:</span><span class="token string">'spec'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">bail</span><span class="token operator">:</span><span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">all</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'test/*.js'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-run'</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-mocha-cli'</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'run'</span><span class="token punctuation">,</span><span class="token string">'mochacli'</span><span class="token punctuation">,</span><span class="token string">'stop:api'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在命令行执行<code>grunt</code>进行测试</p> <h4 id="性能优化"><a href="#性能优化" class="header-anchor">#</a> 性能优化</h4> <p>优化的常用手段是<code>压缩</code>和<code>打包</code></p> <h6 id="压缩html"><a href="#压缩html" class="header-anchor">#</a> 压缩html</h6> <p>下载插件<code>grunt grunt-contrib-htmlmin</code></p> <p>编写<code>Gruntfile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">htmlmin</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">removeComments</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">collapseWhitespace</span><span class="token operator">:</span><span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">files</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">src</span><span class="token operator">:</span><span class="token string">'./index.html'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">dest</span><span class="token operator">:</span><span class="token string">'dist/index.html'</span>
                
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-contrib-htmlmin'</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'htmlmin'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在命令行通过<code>grunt</code>命令进行打包</p> <h6 id="压缩css"><a href="#压缩css" class="header-anchor">#</a> 压缩css</h6> <p>下载插件<code>grunt grunt-contrib-cssmin</code></p> <p>编写<code>Gruntfile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">cssmin</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token string-property property">'rectangle.min.css'</span><span class="token operator">:</span><span class="token string">'rectangle.css'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-contrib-cssmin'</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'cssmin'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在命令行通过<code>grunt</code>命令进行打包</p> <h6 id="压缩js"><a href="#压缩js" class="header-anchor">#</a> 压缩js</h6> <p>下载插件<code>grunt grunt-contrib-uglify</code></p> <p>编写<code>Gruntfile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">uglify</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          			<span class="token string-property property">'dist/index.min.js'</span><span class="token operator">:</span> <span class="token string">'index.js'</span>
      		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-contrib-uglify'</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'uglify'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在命令行通过<code>grunt</code>命令进行打包</p> <h6 id="压缩图片"><a href="#压缩图片" class="header-anchor">#</a> 压缩图片</h6> <ul><li>选择合适的图片格式，不同图片有不同的问题</li> <li>选择合适的图片尺寸，不要放超过展示尺寸的图片</li> <li>选择适当的压缩格式</li> <li>关键性图片设置优先加载（设置延迟加载）</li></ul> <p>下载插件<code>grunt grunt-contrib-imagemin</code></p> <p>编写<code>Gruntfile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">imagemin</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">files</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">expand</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">src</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'images/*.{pmg,jpg,gif}'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token literal-property property">dest</span><span class="token operator">:</span><span class="token string">'dist/'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-contrib-imagemin'</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'imagemin'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在命令行通过<code>grunt</code>命令进行打包</p> <h6 id="打包合并"><a href="#打包合并" class="header-anchor">#</a> 打包合并</h6> <p>下载<code>grunt grunt-contrib-concat</code></p> <p>编写<code>Gruntfile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">concat</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">js</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">expand</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">src</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'index.js'</span><span class="token punctuation">,</span><span class="token string">'util.js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token literal-property property">dest</span><span class="token operator">:</span><span class="token string">'dist/main.js'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">css</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">expand</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">src</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'css/*.css'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token literal-property property">dest</span><span class="token operator">:</span><span class="token string">'dist/main.css'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-contrib-concat'</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'concat:js'</span><span class="token punctuation">,</span><span class="token string">'concat:css'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在命令行通过<code>grunt</code>命令进行打包</p> <h6 id="合并子图"><a href="#合并子图" class="header-anchor">#</a> 合并子图</h6> <p>下载<code>grunt grunt-spritesmith</code></p> <p>编写<code>Gruntfile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">spritesmith</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">file</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">src</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'images/*.png'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token literal-property property">dest</span><span class="token operator">:</span><span class="token string">'dist/bundle.png'</span><span class="token punctuation">,</span>
                destCss<span class="token string">'dist/sprite.css'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-spritesmith'</span><span class="token punctuation">)</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'spritesmith'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在命令行通过<code>grunt</code>命令进行打包,<code>sprite.css</code>中写了各个图的用法</p> <h4 id="自定义一个grunt插件"><a href="#自定义一个grunt插件" class="header-anchor">#</a> 自定义一个grunt插件</h4> <p>下载插件<code>grunt</code></p> <p>编写<code>Gruntfile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">,</span><span class="token string">'build task'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'build task'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.198c4f59.js" defer></script><script src="/assets/js/2.e95879ab.js" defer></script><script src="/assets/js/50.3ce8f918.js" defer></script>
  </body>
</html>
